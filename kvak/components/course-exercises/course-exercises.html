{% load wagtailcore_tags %}

<div>
  <div class="container">
    <div class="course-exercises-component">
      {% for exercise in page.get_children.specific %}
      <details>
        <summary>
          <div class="marker"></div>
          <div class="exercise-summary">
            <div>Exercise {{ forloop.counter }}</div>
            <h2>{{ exercise.title }}</h2>
          </div>
          {% if forloop.counter < start_exercise_index or user_progress.finished == user_progress.total %}
          <div class="start-button">
            {% component "arrow-button" text="REVIEW" href=exercise.get_url / %}
          </div>
          {% elif forloop.counter == start_exercise_index %}
          <div class="start-button">
            {% component "arrow-button" primary=True text="START" href=exercise.get_url / %}
          </div>
          {% endif %}
        </summary>
        <div class="exercise-content">
          <div class="exercise-metadata">
            <div class="time">‚è±Ô∏è {{ exercise.estimated_time }} minutes</div>
            |
            <div class="category">üìÇ {{ exercise.category }}</div>
          </div>
          {{ exercise.description|richtext }}
        </div>
      </details>
      {% if not forloop.last %}
      <hr />
      {% endif %} {% endfor %}
    </div>
  </div>
</div>
